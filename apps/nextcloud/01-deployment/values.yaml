---
nextcloud:
  host: nextcloud.maddin.dev
  extraEnv:
    - name: TRUSTED_PROXIES
      value: "10.244.0.0/24 10.244.1.0/24 10.244.2.0/24 169.254.0.0/16"
  configs:
    previews.config.php: |-
      <?php
      $CONFIG = array (
        'enable_previews' => true,
        'enabledPreviewProviders' => array (
          'OC\Preview\Movie',
          'OC\Preview\PNG',
          'OC\Preview\JPEG',
          'OC\Preview\GIF',
          'OC\Preview\BMP',
          'OC\Preview\XBitmap',
          'OC\Preview\MP3',
          'OC\Preview\MP4',
          'OC\Preview\TXT',
          'OC\Preview\MarkDown',
          'OC\Preview\PDF'
        ),
      );
    custom.config.php: |-
      <?php
      $CONFIG = array (
        'skeletondirectory' => '',
        'hide_login_form' => true,
        'maintenance_window_start' => 2,
        'files.chunked_upload.max_size' => 99000000,
      );

cronjob:
  enabled: true

internalDatabase:
  enabled: false
externalDatabase:
  enabled: true
  type: postgresql
  host: nextcloud-db-rw:5432
  existingSecret:
    enabled: true
    secretName: nextcloud-db-app
    usernameKey: username
    passwordKey: password
    databaseKey: dbname

redis:
  enabled: true
  auth:
    enabled: true
    existingSecret: nextcloud-redis
    existingSecretPasswordKey: password
  global:
    storageClass: ceph-block

persistence:
  enabled: true
  storageClass: ceph-block
  size: 16Gi
  nextcloudData:
    enabled: true
    storageClass: synology
    size: 1000Gi
